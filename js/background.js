!function(e){var t={};function o(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s="./src/ts/background.ts")}({"./src/ts/background.ts":
/*!******************************!*\
  !*** ./src/ts/background.ts ***!
  \******************************/
/*! no static exports found */function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function s(e){try{a(n.next(e))}catch(e){r(e)}}function u(e){try{a(n.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,u)}a((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=o(/*! ./global */"./src/ts/global.ts");chrome.browserAction.onClicked.addListener(e=>n(void 0,void 0,void 0,(function*(){yield i.askToSetupToken()})))},"./src/ts/global.ts":
/*!**************************!*\
  !*** ./src/ts/global.ts ***!
  \**************************/
/*! no static exports found */function(e,t,o){"use strict";var n,i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function s(e){try{a(n.next(e))}catch(e){r(e)}}function u(e){try{a(n.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,u)}a((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});class r{}t.Global=r,r.token="",r.pinned=!1,r.width=250,r.showFollowMenuItem=!0,r.centerFollowText=!0,r.showJoinedTime=!0,r.showUserPrivateCounter=!0,r.showRepoActionCounter=!0,r.showRepoAndContentsSize=!0,r.page=1,r.isHovering=!1,r.contentsSizeCachedRef="",r.contentsSizeTruncated=!1,r.FEEDBACK_URL="https://github.com/Aoi-hosizora/GithubEventsExt/issues",function(e){e.TOKEN="ah-token",e.PINNED="ah-pinned",e.WIDTH="ah-width",e.SHOW_FOLLOW_MENU_ITEM="ah-show-follow-menu-item",e.CENTER_FOLLOW_TEXT="ah-center-follow-text",e.SHOW_JOINED_TIME="ah-show-joined-time",e.SHOW_USER_PRIVATE_COUNTER="ah-show-user-private-counter",e.SHOW_REPO_ACTION_COUNTER="ah-show-repo-action-counter",e.SHOW_REPO_AND_CONTENTS_SIZE="ah-show-repo-contents-size"}(n=t.StorageFlag||(t.StorageFlag={})),t.readStorageToGlobal=function(){return i(this,void 0,void 0,(function*(){r.token=yield a(n.TOKEN,"",{alsoInit:!1}),r.pinned=yield a(n.PINNED,!1,{alsoInit:!0}),r.width=yield a(n.WIDTH,250,{alsoInit:!0}),r.showFollowMenuItem=yield a(n.SHOW_FOLLOW_MENU_ITEM,!0,{alsoInit:!0}),r.centerFollowText=yield a(n.CENTER_FOLLOW_TEXT,!0,{alsoInit:!0}),r.showJoinedTime=yield a(n.SHOW_JOINED_TIME,!0,{alsoInit:!0}),r.showUserPrivateCounter=yield a(n.SHOW_USER_PRIVATE_COUNTER,!0,{alsoInit:!0}),r.showRepoActionCounter=yield a(n.SHOW_REPO_ACTION_COUNTER,!0,{alsoInit:!0}),r.showRepoAndContentsSize=yield a(n.SHOW_REPO_AND_CONTENTS_SIZE,!0,{alsoInit:!0})}))};const s=chrome.storage.sync||chrome.storage.local;function u(e,t){return i(this,void 0,void 0,(function*(){return new Promise((o,n)=>{const i={[e.toString()]:t};s.set(i,()=>o())})}))}function a(e,t,o={}){return i(this,void 0,void 0,(function*(){return new Promise((n,i)=>{s.get(e.toString(),i=>{var r=i[e.toString()];if(null==r||typeof r!=typeof t)if(o.alsoInit){const o={[e.toString()]:t};s.set(o,()=>n(t))}else n(t);else n(r)})})}))}function c(e){return i(this,void 0,void 0,(function*(){return new Promise((t,o)=>{s.remove(e.toString(),()=>t())})}))}t.setStorage=u,t.getStorage=a,t.removeStorage=c,t.askToSetupToken=function(){return i(this,void 0,void 0,(function*(){const e=yield a(n.TOKEN,"");e?yield function(e){return i(this,void 0,void 0,(function*(){confirm(`You have already set a GitHub token (${e}), do you want to remove it?`)&&(yield c(n.TOKEN),alert("You have removed GitHub token successfully."))}))}(e):confirm("Do you want to setup a GitHub token to access the private repos and user information?")&&(yield function(){return i(this,void 0,void 0,(function*(){var e=prompt("Please enter your GitHub personal access token: \n(Token should be defined in repo scope and have read:user permission. You can visit https://github.com/settings/token to generate token.)");null!==e&&((e=e.trim())?(yield u(n.TOKEN,e),alert("Done! Your GitHub token has been set successfully, reload this page to see changes.")):alert("Oops! You have entered an empty token."))}))}())}))}}});
//# sourceMappingURL=background.js.map